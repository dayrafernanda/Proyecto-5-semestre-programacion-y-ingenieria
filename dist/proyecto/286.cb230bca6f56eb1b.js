"use strict";(self.webpackChunksistema_de_gesti_n_de_proyectos=self.webpackChunksistema_de_gesti_n_de_proyectos||[]).push([[286],{3905:(_,c,o)=>{o.r(c),o.d(c,{AuditSystemComponent:()=>F});var l=o(177),d=o(4341),m=o(2909),e=o(4438);function g(n,u){if(1&n&&(e.j41(0,"option",47),e.EFF(1),e.k0s()),2&n){const s=u.$implicit;e.Y8G("value",s),e.R7$(),e.JRh(s)}}function h(n,u){if(1&n&&(e.j41(0,"tr")(1,"td")(2,"small",41),e.EFF(3),e.nI1(4,"date"),e.k0s()(),e.j41(5,"td")(6,"span",48),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"code"),e.EFF(10),e.k0s()(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td")(14,"span",49),e.EFF(15),e.k0s()(),e.j41(16,"td")(17,"span",50),e.EFF(18),e.k0s()(),e.j41(19,"td")(20,"small"),e.EFF(21),e.k0s()()()),2&n){const s=u.$implicit,r=e.XpG();e.R7$(3),e.SpI(" ",e.i5U(4,8,s.timestamp,"dd/MM/yyyy HH:mm")," "),e.R7$(4),e.JRh(s.user),e.R7$(3),e.JRh(s.action),e.R7$(2),e.JRh(s.module),e.R7$(3),e.JRh(s.ipAddress),e.R7$(2),e.Y8G("ngClass",r.getStatusBadgeClass(s.status)),e.R7$(),e.SpI(" ",r.getStatusText(s.status)," "),e.R7$(3),e.JRh(s.details)}}function p(n,u){if(1&n){const s=e.RV6();e.j41(0,"div",51),e.nrm(1,"i",52),e.j41(2,"h5",53),e.EFF(3,"No se encontraron registros"),e.k0s(),e.j41(4,"button",54),e.bIt("click",function(){e.eBV(s);const t=e.XpG();return e.Njj(t.clearFilters())}),e.nrm(5,"i",55),e.EFF(6,"Limpiar Filtros "),e.k0s()()}}let F=(()=>{class n{constructor(){this.auditLogs=[{id:1,timestamp:new Date("2024-01-16T10:30:00"),user:"admin@universidad.edu",action:"LOGIN",module:"Autenticaci\xf3n",ipAddress:"192.168.1.100",status:"success",details:"Inicio de sesi\xf3n exitoso"},{id:2,timestamp:new Date("2024-01-16T10:25:00"),user:"maria.gonzalez@universidad.edu",action:"CREATE_USER",module:"Gesti\xf3n de Usuarios",ipAddress:"192.168.1.150",status:"success",details:"Usuario creado: carlos.rodriguez@universidad.edu"},{id:3,timestamp:new Date("2024-01-16T10:20:00"),user:"ana.martinez@universidad.edu",action:"UPLOAD_FILE",module:"Repositorio",ipAddress:"192.168.1.200",status:"error",details:"Error al subir archivo: tama\xf1o excedido"},{id:4,timestamp:new Date("2024-01-16T10:15:00"),user:"roberto.silva@universidad.edu",action:"DELETE_RECORD",module:"Base de Datos",ipAddress:"192.168.1.175",status:"warning",details:"Eliminaci\xf3n de registro de proyecto"},{id:5,timestamp:new Date("2024-01-16T10:10:00"),user:"system",action:"BACKUP",module:"Sistema",ipAddress:"127.0.0.1",status:"success",details:"Backup completado exitosamente"}],this.filteredLogs=[],this.searchQuery="",this.selectedModule="all",this.selectedStatus="all",this.dateRange={start:"",end:""},this.modules=["Autenticaci\xf3n","Gesti\xf3n de Usuarios","Repositorio","Base de Datos","Sistema","Seguridad"]}ngOnInit(){this.filteredLogs=[...this.auditLogs]}applyFilters(){this.filteredLogs=this.auditLogs.filter(s=>{const r=!this.searchQuery||s.user.toLowerCase().includes(this.searchQuery.toLowerCase())||s.action.toLowerCase().includes(this.searchQuery.toLowerCase())||s.details.toLowerCase().includes(this.searchQuery.toLowerCase()),t="all"===this.selectedModule||s.module===this.selectedModule,a="all"===this.selectedStatus||s.status===this.selectedStatus;let i=!0;return this.dateRange.start&&(i=i&&new Date(s.timestamp)>=new Date(this.dateRange.start)),this.dateRange.end&&(i=i&&new Date(s.timestamp)<=new Date(this.dateRange.end)),r&&t&&a&&i})}onSearchChange(){this.applyFilters()}clearFilters(){this.searchQuery="",this.selectedModule="all",this.selectedStatus="all",this.dateRange={start:"",end:""},this.applyFilters()}exportLogs(){alert("Funcionalidad de exportaci\xf3n en desarrollo")}getStats(){return{total:this.auditLogs.length,success:this.auditLogs.filter(s=>"success"===s.status).length,errors:this.auditLogs.filter(s=>"error"===s.status).length,warnings:this.auditLogs.filter(s=>"warning"===s.status).length}}getStatusBadgeClass(s){switch(s){case"success":return"bg-success";case"error":return"bg-danger";case"warning":return"bg-warning";default:return"bg-secondary"}}getStatusText(s){switch(s){case"success":return"\xc9xito";case"error":return"Error";case"warning":return"Advertencia";default:return s}}now(){return new Date}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-audit-system"]],standalone:!0,features:[e.aNF],decls:128,vars:17,consts:[[1,"container-fluid","audit-system"],[1,"row","bg-dark","text-white","py-4"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-2"],[1,"bi","bi-shield-check","me-3"],[1,"mb-0","lead"],[1,"text-end"],[1,"btn","btn-light","me-2",3,"click"],[1,"bi","bi-download","me-2"],[1,"row","mt-4"],[1,"col-md-3"],[1,"card","bg-primary","text-white"],[1,"card-body"],[1,"d-flex","justify-content-between"],[1,"mb-0"],[1,"bi","bi-activity","fs-1","opacity-50"],[1,"card","bg-success","text-white"],[1,"bi","bi-check-circle","fs-1","opacity-50"],[1,"card","bg-danger","text-white"],[1,"bi","bi-exclamation-circle","fs-1","opacity-50"],[1,"card","bg-warning","text-white"],[1,"bi","bi-exclamation-triangle","fs-1","opacity-50"],[1,"card","shadow-sm"],[1,"row","g-3"],[1,"form-label"],["type","text","placeholder","Usuario, acci\xf3n o detalles...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"col-md-2"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value","all"],[3,"value",4,"ngFor","ngForOf"],["value","success"],["value","error"],["value","warning"],["type","date",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"col-md-1","d-flex","align-items-end"],[1,"btn","btn-outline-secondary","w-100",3,"click"],[1,"bi","bi-arrow-clockwise"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"bi","bi-list-ul","me-2"],[1,"badge","bg-primary","ms-2"],[1,"text-muted"],[1,"table-responsive"],[1,"table","table-hover"],[1,"table-light"],[4,"ngFor","ngForOf"],["class","text-center py-5",4,"ngIf"],[3,"value"],[1,"fw-bold"],[1,"text-muted","font-monospace"],[1,"badge",3,"ngClass"],[1,"text-center","py-5"],[1,"bi","bi-search","display-1","text-muted"],[1,"text-muted","mt-3"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-arrow-clockwise","me-1"]],template:function(r,t){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"h1",4),e.nrm(6,"i",5),e.EFF(7," Auditor\xeda del Sistema "),e.k0s(),e.j41(8,"p",6),e.EFF(9,"Sistema integral de monitoreo y seguridad"),e.k0s()(),e.j41(10,"div",7)(11,"button",8),e.bIt("click",function(){return t.exportLogs()}),e.nrm(12,"i",9),e.EFF(13,"Exportar "),e.k0s()()()()(),e.j41(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"div")(20,"h4",15),e.EFF(21),e.k0s(),e.j41(22,"small"),e.EFF(23,"Total Eventos"),e.k0s()(),e.nrm(24,"i",16),e.k0s()()()(),e.j41(25,"div",11)(26,"div",17)(27,"div",13)(28,"div",14)(29,"div")(30,"h4",15),e.EFF(31),e.k0s(),e.j41(32,"small"),e.EFF(33,"\xc9xitos"),e.k0s()(),e.nrm(34,"i",18),e.k0s()()()(),e.j41(35,"div",11)(36,"div",19)(37,"div",13)(38,"div",14)(39,"div")(40,"h4",15),e.EFF(41),e.k0s(),e.j41(42,"small"),e.EFF(43,"Errores"),e.k0s()(),e.nrm(44,"i",20),e.k0s()()()(),e.j41(45,"div",11)(46,"div",21)(47,"div",13)(48,"div",14)(49,"div")(50,"h4",15),e.EFF(51),e.k0s(),e.j41(52,"small"),e.EFF(53,"Advertencias"),e.k0s()(),e.nrm(54,"i",22),e.k0s()()()()(),e.j41(55,"div",10)(56,"div",2)(57,"div",23)(58,"div",13)(59,"div",24)(60,"div",11)(61,"label",25),e.EFF(62,"Buscar"),e.k0s(),e.j41(63,"input",26),e.mxI("ngModelChange",function(i){return e.DH7(t.searchQuery,i)||(t.searchQuery=i),i}),e.bIt("input",function(){return t.onSearchChange()}),e.k0s()(),e.j41(64,"div",27)(65,"label",25),e.EFF(66,"M\xf3dulo"),e.k0s(),e.j41(67,"select",28),e.mxI("ngModelChange",function(i){return e.DH7(t.selectedModule,i)||(t.selectedModule=i),i}),e.bIt("change",function(){return t.applyFilters()}),e.j41(68,"option",29),e.EFF(69,"Todos los m\xf3dulos"),e.k0s(),e.DNE(70,g,2,2,"option",30),e.k0s()(),e.j41(71,"div",27)(72,"label",25),e.EFF(73,"Estado"),e.k0s(),e.j41(74,"select",28),e.mxI("ngModelChange",function(i){return e.DH7(t.selectedStatus,i)||(t.selectedStatus=i),i}),e.bIt("change",function(){return t.applyFilters()}),e.j41(75,"option",29),e.EFF(76,"Todos los estados"),e.k0s(),e.j41(77,"option",31),e.EFF(78,"\xc9xito"),e.k0s(),e.j41(79,"option",32),e.EFF(80,"Error"),e.k0s(),e.j41(81,"option",33),e.EFF(82,"Advertencia"),e.k0s()()(),e.j41(83,"div",27)(84,"label",25),e.EFF(85,"Fecha desde"),e.k0s(),e.j41(86,"input",34),e.mxI("ngModelChange",function(i){return e.DH7(t.dateRange.start,i)||(t.dateRange.start=i),i}),e.bIt("change",function(){return t.applyFilters()}),e.k0s()(),e.j41(87,"div",27)(88,"label",25),e.EFF(89,"Fecha hasta"),e.k0s(),e.j41(90,"input",34),e.mxI("ngModelChange",function(i){return e.DH7(t.dateRange.end,i)||(t.dateRange.end=i),i}),e.bIt("change",function(){return t.applyFilters()}),e.k0s()(),e.j41(91,"div",35)(92,"button",36),e.bIt("click",function(){return t.clearFilters()}),e.nrm(93,"i",37),e.k0s()()()()()()(),e.j41(94,"div",10)(95,"div",2)(96,"div",23)(97,"div",38)(98,"h5",15),e.nrm(99,"i",39),e.EFF(100," Registros de Auditor\xeda "),e.j41(101,"span",40),e.EFF(102),e.k0s()(),e.j41(103,"small",41),e.EFF(104),e.nI1(105,"date"),e.k0s()(),e.j41(106,"div",13)(107,"div",42)(108,"table",43)(109,"thead",44)(110,"tr")(111,"th"),e.EFF(112,"Fecha/Hora"),e.k0s(),e.j41(113,"th"),e.EFF(114,"Usuario"),e.k0s(),e.j41(115,"th"),e.EFF(116,"Acci\xf3n"),e.k0s(),e.j41(117,"th"),e.EFF(118,"M\xf3dulo"),e.k0s(),e.j41(119,"th"),e.EFF(120,"IP"),e.k0s(),e.j41(121,"th"),e.EFF(122,"Estado"),e.k0s(),e.j41(123,"th"),e.EFF(124,"Detalles"),e.k0s()()(),e.j41(125,"tbody"),e.DNE(126,h,22,11,"tr",45),e.k0s()()(),e.DNE(127,p,7,0,"div",46),e.k0s()()()()()),2&r&&(e.R7$(21),e.JRh(t.getStats().total),e.R7$(10),e.JRh(t.getStats().success),e.R7$(10),e.JRh(t.getStats().errors),e.R7$(10),e.JRh(t.getStats().warnings),e.R7$(12),e.R50("ngModel",t.searchQuery),e.R7$(4),e.R50("ngModel",t.selectedModule),e.R7$(3),e.Y8G("ngForOf",t.modules),e.R7$(4),e.R50("ngModel",t.selectedStatus),e.R7$(12),e.R50("ngModel",t.dateRange.start),e.R7$(4),e.R50("ngModel",t.dateRange.end),e.R7$(12),e.JRh(t.filteredLogs.length),e.R7$(2),e.SpI("\xdaltima actualizaci\xf3n: ",e.i5U(105,14,t.now(),"dd/MM/yyyy HH:mm"),""),e.R7$(22),e.Y8G("ngForOf",t.filteredLogs),e.R7$(),e.Y8G("ngIf",0===t.filteredLogs.length))},dependencies:[l.MD,l.YU,l.Sq,l.bT,l.vh,d.YN,d.xH,d.y7,d.me,d.wz,d.BC,d.vS,m.iI]})}}return n})()}}]);