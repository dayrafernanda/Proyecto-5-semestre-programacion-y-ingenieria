"use strict";(self.webpackChunksistema_de_gesti_n_de_proyectos=self.webpackChunksistema_de_gesti_n_de_proyectos||[]).push([[885],{7885:(M,m,d)=>{d.r(m),d.d(m,{UserManagementComponent:()=>v});var c=d(177),l=d(4341),u=d(2909),e=d(4438);function g(a,o){if(1&a&&(e.j41(0,"option",51),e.EFF(1),e.k0s()),2&a){const t=o.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(t)}}function p(a,o){if(1&a){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"div",52)(3,"div",53),e.EFF(4),e.k0s(),e.j41(5,"div")(6,"div",54),e.EFF(7),e.k0s(),e.j41(8,"small",43),e.EFF(9),e.k0s()()()(),e.j41(10,"td")(11,"span",55),e.EFF(12),e.k0s()(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td")(16,"span",55),e.EFF(17),e.k0s()(),e.j41(18,"td")(19,"small",43),e.EFF(20),e.nI1(21,"date"),e.k0s()(),e.j41(22,"td")(23,"div",56)(24,"button",57),e.bIt("click",function(){const n=e.eBV(t).$implicit,i=e.XpG();return e.Njj(i.openEditUserModal(n))}),e.nrm(25,"i",58),e.k0s(),e.j41(26,"button",59),e.bIt("click",function(){const n=e.eBV(t).$implicit,i=e.XpG();return e.Njj(i.deleteUser(n.id))}),e.nrm(27,"i",60),e.k0s()()()()}if(2&a){const t=o.$implicit,s=e.XpG();e.R7$(4),e.SpI(" ",s.getInitial(t.name)," "),e.R7$(3),e.JRh(t.name),e.R7$(2),e.JRh(t.email),e.R7$(2),e.Y8G("ngClass",s.getRoleBadgeClass(t.role)),e.R7$(),e.SpI(" ",t.role," "),e.R7$(2),e.JRh(t.department),e.R7$(2),e.Y8G("ngClass",s.getStatusBadgeClass(t.status)),e.R7$(),e.SpI(" ",s.getStatusText(t.status)," "),e.R7$(3),e.SpI(" ",e.i5U(21,9,t.lastLogin,"dd/MM/yyyy")," ")}}function _(a,o){if(1&a){const t=e.RV6();e.j41(0,"div",61),e.nrm(1,"i",62),e.j41(2,"h5",63),e.EFF(3,"No se encontraron usuarios"),e.k0s(),e.j41(4,"p",43),e.EFF(5,"Prueba ajustando los filtros de b\xfasqueda"),e.k0s(),e.j41(6,"button",64),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.clearFilters())}),e.nrm(7,"i",65),e.EFF(8,"Limpiar Filtros "),e.k0s()()}}function h(a,o){1&a&&e.nrm(0,"div",66)}function b(a,o){if(1&a&&(e.j41(0,"option",51),e.EFF(1),e.k0s()),2&a){const t=o.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(t)}}function F(a,o){if(1&a&&(e.j41(0,"option",51),e.EFF(1),e.k0s()),2&a){const t=o.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(t)}}function f(a,o){if(1&a){const t=e.RV6();e.j41(0,"div",67)(1,"div",68)(2,"div",69)(3,"div",70)(4,"h5",71),e.nrm(5,"i",72),e.EFF(6),e.k0s(),e.j41(7,"button",73),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeModal())}),e.k0s()(),e.j41(8,"div",74)(9,"div",75)(10,"div",76)(11,"label",15),e.EFF(12,"Nombre completo *"),e.k0s(),e.j41(13,"input",77),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.newUser.name,n)||(i.newUser.name=n),e.Njj(n)}),e.k0s()(),e.j41(14,"div",76)(15,"label",15),e.EFF(16,"Email *"),e.k0s(),e.j41(17,"input",78),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.newUser.email,n)||(i.newUser.email=n),e.Njj(n)}),e.k0s()()(),e.j41(18,"div",75)(19,"div",76)(20,"label",15),e.EFF(21,"Rol *"),e.k0s(),e.j41(22,"select",79),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.newUser.role,n)||(i.newUser.role=n),e.Njj(n)}),e.DNE(23,b,2,2,"option",23),e.k0s()(),e.j41(24,"div",76)(25,"label",15),e.EFF(26,"Estado *"),e.k0s(),e.j41(27,"select",79),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.newUser.status,n)||(i.newUser.status=n),e.Njj(n)}),e.j41(28,"option",24),e.EFF(29,"Activo"),e.k0s(),e.j41(30,"option",25),e.EFF(31,"Inactivo"),e.k0s(),e.j41(32,"option",26),e.EFF(33,"Pendiente"),e.k0s()()()(),e.j41(34,"div",80)(35,"label",15),e.EFF(36,"Departamento *"),e.k0s(),e.j41(37,"select",79),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.DH7(i.newUser.department,n)||(i.newUser.department=n),e.Njj(n)}),e.j41(38,"option",81),e.EFF(39,"Seleccione un departamento"),e.k0s(),e.DNE(40,F,2,2,"option",23),e.k0s()()(),e.j41(41,"div",82)(42,"button",83),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeModal())}),e.nrm(43,"i",84),e.EFF(44,"Cancelar "),e.k0s(),e.j41(45,"button",85),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.saveUser())}),e.nrm(46,"i",86),e.EFF(47),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(6),e.SpI(" ",t.isEditing?"Editar Usuario":"Nuevo Usuario"," "),e.R7$(7),e.R50("ngModel",t.newUser.name),e.R7$(4),e.R50("ngModel",t.newUser.email),e.R7$(5),e.R50("ngModel",t.newUser.role),e.R7$(),e.Y8G("ngForOf",t.roles),e.R7$(4),e.R50("ngModel",t.newUser.status),e.R7$(10),e.R50("ngModel",t.newUser.department),e.R7$(3),e.Y8G("ngForOf",t.departments),e.R7$(5),e.Y8G("disabled",!t.isFormValid()),e.R7$(2),e.SpI(" ",t.isEditing?"Actualizar":"Crear"," Usuario ")}}let v=(()=>{class a{constructor(){this.users=[{id:1,name:"Mar\xeda Gonz\xe1lez",email:"maria.gonzalez@universidad.edu",role:"Docente",status:"active",department:"Ingenier\xeda de Sistemas",lastLogin:new Date("2024-01-15"),createdAt:new Date("2023-08-10")},{id:2,name:"Carlos Rodr\xedguez",email:"carlos.rodriguez@universidad.edu",role:"Administrador",status:"active",department:"Administraci\xf3n",lastLogin:new Date("2024-01-16"),createdAt:new Date("2023-06-15")},{id:3,name:"Ana Mart\xednez",email:"ana.martinez@universidad.edu",role:"Estudiante",status:"active",department:"Medicina",lastLogin:new Date("2024-01-14"),createdAt:new Date("2024-01-05")},{id:4,name:"Roberto Silva",email:"roberto.silva@universidad.edu",role:"Docente",status:"inactive",department:"Matem\xe1ticas",lastLogin:new Date("2023-12-20"),createdAt:new Date("2023-09-12")},{id:5,name:"Laura Mendoza",email:"laura.mendoza@universidad.edu",role:"Estudiante",status:"pending",department:"Derecho",lastLogin:new Date("2024-01-10"),createdAt:new Date("2024-01-08")}],this.filteredUsers=[],this.searchQuery="",this.selectedRole="all",this.selectedStatus="all",this.newUser={name:"",email:"",role:"Estudiante",status:"pending",department:""},this.showUserModal=!1,this.isEditing=!1,this.editingUserId=null,this.roles=["Estudiante","Docente","Administrador","Coordinador"],this.departments=["Ingenier\xeda de Sistemas","Medicina","Derecho","Matem\xe1ticas","Administraci\xf3n","Psicolog\xeda","Econom\xeda"]}ngOnInit(){this.filteredUsers=[...this.users]}applyFilters(){this.filteredUsers=this.users.filter(t=>(!this.searchQuery||t.name.toLowerCase().includes(this.searchQuery.toLowerCase())||t.email.toLowerCase().includes(this.searchQuery.toLowerCase())||t.department.toLowerCase().includes(this.searchQuery.toLowerCase()))&&("all"===this.selectedRole||t.role===this.selectedRole)&&("all"===this.selectedStatus||t.status===this.selectedStatus))}onSearchChange(){this.applyFilters()}clearFilters(){this.searchQuery="",this.selectedRole="all",this.selectedStatus="all",this.applyFilters()}openNewUserModal(){this.isEditing=!1,this.editingUserId=null,this.newUser={name:"",email:"",role:"Estudiante",status:"pending",department:""},this.showUserModal=!0}openEditUserModal(t){this.isEditing=!0,this.editingUserId=t.id,this.newUser={...t},this.showUserModal=!0}closeModal(){this.showUserModal=!1,this.resetForm()}saveUser(){if(this.isEditing&&this.editingUserId){const t=this.users.findIndex(s=>s.id===this.editingUserId);-1!==t&&(this.users[t]={...this.users[t],...this.newUser})}else{const t={id:Math.max(...this.users.map(s=>s.id))+1,name:this.newUser.name,email:this.newUser.email,role:this.newUser.role,status:this.newUser.status,department:this.newUser.department,lastLogin:new Date,createdAt:new Date};this.users.unshift(t)}this.applyFilters(),this.showUserModal=!1,this.resetForm()}deleteUser(t){confirm("\xbfEst\xe1s seguro de que quieres eliminar este usuario?")&&(this.users=this.users.filter(s=>s.id!==t),this.applyFilters())}resetForm(){this.newUser={name:"",email:"",role:"Estudiante",status:"pending",department:""},this.isEditing=!1,this.editingUserId=null}isFormValid(){return!!(this.newUser.name&&this.newUser.email&&this.newUser.department)}getActiveUsersCount(){return this.users.filter(t=>"active"===t.status).length}getPendingUsersCount(){return this.users.filter(t=>"pending"===t.status).length}getTeachersCount(){return this.users.filter(t=>"Docente"===t.role).length}getInitial(t){return t.charAt(0).toUpperCase()}getStatusBadgeClass(t){switch(t){case"active":return"bg-success";case"inactive":default:return"bg-secondary";case"pending":return"bg-warning"}}getStatusText(t){switch(t){case"active":return"Activo";case"inactive":return"Inactivo";case"pending":return"Pendiente";default:return t}}getRoleBadgeClass(t){switch(t){case"Administrador":return"bg-danger";case"Docente":return"bg-primary";case"Coordinador":return"bg-info";case"Estudiante":return"bg-success";default:return"bg-secondary"}}static{this.\u0275fac=function(s){return new(s||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-user-management"]],standalone:!0,features:[e.aNF],decls:123,vars:15,consts:[[1,"container-fluid","user-management"],[1,"row","bg-primary","text-white","py-4"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-2"],[1,"bi","bi-people","me-3"],[1,"mb-0","lead"],[1,"text-end"],[1,"btn","btn-light",3,"click"],[1,"bi","bi-person-plus","me-2"],[1,"row","mt-4"],[1,"card","shadow-sm"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-4"],[1,"form-label"],[1,"input-group"],[1,"input-group-text","bg-light"],[1,"bi","bi-search"],["type","text","placeholder","Nombre, email o departamento...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"col-md-3"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value","all"],[3,"value",4,"ngFor","ngForOf"],["value","active"],["value","inactive"],["value","pending"],[1,"col-md-2","d-flex","align-items-end"],[1,"btn","btn-outline-secondary","w-100",3,"click"],[1,"bi","bi-funnel","me-2"],[1,"card","bg-primary","text-white"],[1,"d-flex","justify-content-between"],[1,"mb-0"],[1,"bi","bi-people","fs-1","opacity-50"],[1,"card","bg-success","text-white"],[1,"bi","bi-check-circle","fs-1","opacity-50"],[1,"card","bg-warning","text-white"],[1,"bi","bi-clock","fs-1","opacity-50"],[1,"card","bg-info","text-white"],[1,"bi","bi-person-badge","fs-1","opacity-50"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"bi","bi-list-ul","me-2"],[1,"badge","bg-primary","ms-2"],[1,"text-muted"],[1,"table-responsive"],[1,"table","table-hover"],[1,"table-light"],[4,"ngFor","ngForOf"],["class","text-center py-5",4,"ngIf"],["class","modal-backdrop show",4,"ngIf"],["class","modal show d-block","tabindex","-1",4,"ngIf"],[3,"value"],[1,"d-flex","align-items-center"],[1,"avatar-circle","bg-primary","text-white","me-3"],[1,"fw-bold"],[1,"badge",3,"ngClass"],[1,"btn-group","btn-group-sm"],["title","Editar usuario",1,"btn","btn-outline-primary",3,"click"],[1,"bi","bi-pencil"],["title","Eliminar usuario",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],[1,"text-center","py-5"],[1,"bi","bi-search","display-1","text-muted"],[1,"text-muted","mt-3"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-arrow-clockwise","me-1"],[1,"modal-backdrop","show"],["tabindex","-1",1,"modal","show","d-block"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title"],[1,"bi","bi-person","me-2"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body"],[1,"row"],[1,"col-md-6","mb-3"],["type","text","required","","placeholder","Ingrese el nombre completo",1,"form-control",3,"ngModelChange","ngModel"],["type","email","required","","placeholder","usuario@universidad.edu",1,"form-control",3,"ngModelChange","ngModel"],["required","",1,"form-select",3,"ngModelChange","ngModel"],[1,"mb-3"],["value",""],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-x-circle","me-1"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"bi","bi-check-lg","me-1"]],template:function(s,n){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"h1",4),e.nrm(6,"i",5),e.EFF(7," Gesti\xf3n de Usuarios "),e.k0s(),e.j41(8,"p",6),e.EFF(9,"Sistema integral de administraci\xf3n de usuarios y permisos"),e.k0s()(),e.j41(10,"div",7)(11,"button",8),e.bIt("click",function(){return n.openNewUserModal()}),e.nrm(12,"i",9),e.EFF(13,"Nuevo Usuario "),e.k0s()()()()(),e.j41(14,"div",10)(15,"div",2)(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"label",15),e.EFF(21,"Buscar usuarios"),e.k0s(),e.j41(22,"div",16)(23,"span",17),e.nrm(24,"i",18),e.k0s(),e.j41(25,"input",19),e.mxI("ngModelChange",function(r){return e.DH7(n.searchQuery,r)||(n.searchQuery=r),r}),e.bIt("input",function(){return n.onSearchChange()}),e.k0s()()(),e.j41(26,"div",20)(27,"label",15),e.EFF(28,"Filtrar por rol"),e.k0s(),e.j41(29,"select",21),e.mxI("ngModelChange",function(r){return e.DH7(n.selectedRole,r)||(n.selectedRole=r),r}),e.bIt("change",function(){return n.applyFilters()}),e.j41(30,"option",22),e.EFF(31,"Todos los roles"),e.k0s(),e.DNE(32,g,2,2,"option",23),e.k0s()(),e.j41(33,"div",20)(34,"label",15),e.EFF(35,"Filtrar por estado"),e.k0s(),e.j41(36,"select",21),e.mxI("ngModelChange",function(r){return e.DH7(n.selectedStatus,r)||(n.selectedStatus=r),r}),e.bIt("change",function(){return n.applyFilters()}),e.j41(37,"option",22),e.EFF(38,"Todos los estados"),e.k0s(),e.j41(39,"option",24),e.EFF(40,"Activo"),e.k0s(),e.j41(41,"option",25),e.EFF(42,"Inactivo"),e.k0s(),e.j41(43,"option",26),e.EFF(44,"Pendiente"),e.k0s()()(),e.j41(45,"div",27)(46,"button",28),e.bIt("click",function(){return n.applyFilters()}),e.nrm(47,"i",29),e.EFF(48,"Filtrar "),e.k0s()()()()()()(),e.j41(49,"div",10)(50,"div",20)(51,"div",30)(52,"div",12)(53,"div",31)(54,"div")(55,"h4",32),e.EFF(56),e.k0s(),e.j41(57,"small"),e.EFF(58,"Total Usuarios"),e.k0s()(),e.nrm(59,"i",33),e.k0s()()()(),e.j41(60,"div",20)(61,"div",34)(62,"div",12)(63,"div",31)(64,"div")(65,"h4",32),e.EFF(66),e.k0s(),e.j41(67,"small"),e.EFF(68,"Usuarios Activos"),e.k0s()(),e.nrm(69,"i",35),e.k0s()()()(),e.j41(70,"div",20)(71,"div",36)(72,"div",12)(73,"div",31)(74,"div")(75,"h4",32),e.EFF(76),e.k0s(),e.j41(77,"small"),e.EFF(78,"Pendientes"),e.k0s()(),e.nrm(79,"i",37),e.k0s()()()(),e.j41(80,"div",20)(81,"div",38)(82,"div",12)(83,"div",31)(84,"div")(85,"h4",32),e.EFF(86),e.k0s(),e.j41(87,"small"),e.EFF(88,"Docentes"),e.k0s()(),e.nrm(89,"i",39),e.k0s()()()()(),e.j41(90,"div",10)(91,"div",2)(92,"div",11)(93,"div",40)(94,"h5",32),e.nrm(95,"i",41),e.EFF(96," Lista de Usuarios "),e.j41(97,"span",42),e.EFF(98),e.k0s()(),e.j41(99,"small",43),e.EFF(100),e.k0s()(),e.j41(101,"div",12)(102,"div",44)(103,"table",45)(104,"thead",46)(105,"tr")(106,"th"),e.EFF(107,"Usuario"),e.k0s(),e.j41(108,"th"),e.EFF(109,"Rol"),e.k0s(),e.j41(110,"th"),e.EFF(111,"Departamento"),e.k0s(),e.j41(112,"th"),e.EFF(113,"Estado"),e.k0s(),e.j41(114,"th"),e.EFF(115,"\xdaltimo Acceso"),e.k0s(),e.j41(116,"th"),e.EFF(117,"Acciones"),e.k0s()()(),e.j41(118,"tbody"),e.DNE(119,p,28,12,"tr",47),e.k0s()()(),e.DNE(120,_,9,0,"div",48),e.k0s()()()()(),e.DNE(121,h,1,0,"div",49)(122,f,48,10,"div",50)),2&s&&(e.R7$(25),e.R50("ngModel",n.searchQuery),e.R7$(4),e.R50("ngModel",n.selectedRole),e.R7$(3),e.Y8G("ngForOf",n.roles),e.R7$(4),e.R50("ngModel",n.selectedStatus),e.R7$(20),e.JRh(n.users.length),e.R7$(10),e.JRh(n.getActiveUsersCount()),e.R7$(10),e.JRh(n.getPendingUsersCount()),e.R7$(10),e.JRh(n.getTeachersCount()),e.R7$(12),e.JRh(n.filteredUsers.length),e.R7$(2),e.Lme("Mostrando ",n.filteredUsers.length," de ",n.users.length," usuarios"),e.R7$(19),e.Y8G("ngForOf",n.filteredUsers),e.R7$(),e.Y8G("ngIf",0===n.filteredUsers.length),e.R7$(),e.Y8G("ngIf",n.showUserModal),e.R7$(),e.Y8G("ngIf",n.showUserModal))},dependencies:[c.MD,c.YU,c.Sq,c.bT,c.vh,l.YN,l.xH,l.y7,l.me,l.wz,l.BC,l.YS,l.vS,u.iI],styles:[".user-management[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f8f9fa,#e9ecef)}.avatar-circle[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.9rem}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#007bff0d}.card[_ngcontent-%COMP%]{border:none;box-shadow:0 .15rem 1.75rem #3a3b4526}.badge[_ngcontent-%COMP%]{font-size:.75em;padding:.35em .65em}.btn-group-sm[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.75rem}.modal-backdrop[_ngcontent-%COMP%]{opacity:.5}@media (max-width: 768px){.table-responsive[_ngcontent-%COMP%]{font-size:.875rem}.avatar-circle[_ngcontent-%COMP%]{width:32px;height:32px;font-size:.8rem}.btn-group-sm[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{padding:.2rem .4rem}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.btn[_ngcontent-%COMP%]{transition:all .2s ease}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.bg-success[_ngcontent-%COMP%]{background-color:#1cc88a!important}.bg-warning[_ngcontent-%COMP%]{background-color:#f6c23e!important}.bg-secondary[_ngcontent-%COMP%]{background-color:#858796!important}.bg-primary[_ngcontent-%COMP%]{background-color:#4e73df!important}.bg-danger[_ngcontent-%COMP%]{background-color:#e74a3b!important}.bg-info[_ngcontent-%COMP%]{background-color:#36b9cc!important}"]})}}return a})()}}]);